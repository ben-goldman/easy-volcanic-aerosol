Easy Volcanic Aerosol (EVA) version 1.2: users guide

Author: Matthew Toohey (matthew.toohey@usask.ca)
Last update, October 2022

Fork Author: Benjamin Goldman (bog2101@columbia.edu)
Last update, June 2025

Structure

The EVA package is composed of:

1. The mo_EVA.f90 FORTRAN module: this holds all the subroutines used to calculate volcanic forcing
2. Input files in netcdf format, of 3 types:
   a. EVA parameter set, specifying the values to be used for the parameterizations in the mo_EVA routines. Three parameter sets are available, with "background" injections representative of modern (~2000s), preindistrial (1850) emissions, or zero background.
   b. An eruption history file, specifying the date, location, volcanic stratospheric sulfur injection (VSSI, in TgS) and, optionally, the hemispheric asymmetry factor to be applied to each eruption. 
   c. A lookup table, containing the scaling factors to convert EXT550 and reff to wavelength dependent EXT, SSA and ASY based on Mie Theory.
3. A FORTRAN main file (eva_build_sulfate_file.f90) to build a sulfate file specifying the timeseries of sulfate in the equatorial, NH and SH regions based on the EVA box model transport scheme.
4. FORTRAN main files (e.g., eva_build_forcing_files.f90) to build aerosol property (aka forcing) files from the sulfate timeseries. Forcing can be created in different formats:
   a. eva_build_forcing_files_cmip6.f90 creates files of a format very similar to the CMIP6 historical volcanic aerosol files
   b. eva_build_forcing_files_on_levels.f90 creates files tailored for use by the ECHAM system, using hybrid sigma model levels as the vertical coordinate
   c. eva_build_forcing_files.f90 creates files on a basic 1 km vertical grid with variable names following the ECHAM standard
   d. eva_build_aod_file.f90 creates a file with 2D (latitude, time) output variables of AOD at 550 nm and effective radius (reff)
5. A netcdf file containing specifications of the grids to be used in the output of EVA, ie., latitude, and wavelength bands. Gridfiles for a selection of models participating in CMIP6 are found in the 'gridfiles' directory.


Compiling

_To compile on NASA Discover machine using ifort and mpi:_
`make`


Namelist

When run, EVA reads a set of parameter values from the eva_namelist file, thus the parameters listed therein can be changed to modify the EVA runs. Parameters listed in the eva_namelist include:
1. Input data, including, eruption list name, parameter set filename, and lookuptable filename
2. Start and end dates for the sulfate file generated by "build_eva_sulfate_file". Since there is a short spin up time to the timestepping algorithm, it is best to start the sulfate file at least 10 years before the desired first forcing or AOD files
3. Specifications for the output files (both "forcing" files and the simpler aod files): save directory, gridfile to use, save name stem, start and end date.


Running

Step 1: build sulfate file

The script eva_build_sulfate_file.f90 reads the eruption history file, and based on the parameter settings in EVAv1_parameter_set_modernBG.nc, builds a timeseries of effective sulfate mass*, saved in file eva_sulfate_timeseries.nc.

* Effective sulfate mass should not necessarily be interpreted as being an accurate estimate of the real mass of sulfate aerosol for eruptions - please see discussion in the EVA paper.

Once compiled, simply run the script:

>> ./eva_build_sulfate_file

Step 2: build forcing files

The script eva_build_forcing_files_cmip6.f90 builds yearly volcanic aerosol forcing files, with aerosol optical properties as a function of time, latitude, height and wavelength. Once the sulfate file is produced via step 1, and eva_build_forcing_files_cmip6.f90 is compiled, simply run the script:

>> ./eva_build_forcing_files_cmip6

As a default, this script produces forcing files for the years (YYYY) 1991 through 1995, as eva_forcing_CMIP6_ECHAM5_YYYY.nc.

Modifications

New input files

Any of the input files can be readily swapped for alternative files, by changing the filenames given in the "eva_namelist". This can be done to change the source of eruption histories or change the parameter settings of EVA. Care must be taken that the variable names and dimensions of the new input files are identical to those of the default input files.


For different model set ups

Modifying the output of EVA to different model specifications is possible by supplying an alternate grid file in the running of the eva_build_forcing_files routine. Gridfiles for many models which particpiated in CMIP6 are avaialble in the gridfiles directory.  

